
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>×ª×¨×’×•×œ ×¢×¨×‘×™×ª FINAL MOBILE FIXED</title>
<style>
body{font-family:Arial;background:#f4f6fb;margin:0;padding:12px;-webkit-tap-highlight-color:transparent}
.container{display:flex;flex-direction:column;gap:14px}
.box{background:white;border-radius:16px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,0.12)}
h1{text-align:center;font-size:22px;margin:6px 0 10px}
h2{text-align:center;font-size:18px;margin:6px 0 10px}
.word{font-size:44px;text-align:center;margin:18px 0;font-weight:bold}
.answers button{width:100%;padding:16px;margin:6px 0;border:none;border-radius:14px;font-size:18px;background:#e9ecf5}
.answers button.correct{background:#4caf50;color:white}
.answers button.wrong{background:#f44336;color:white}
.progress{height:16px;background:#eee;border-radius:10px;overflow:hidden;margin-top:12px}
.progress-bar{height:100%;width:0%;background:#4caf50}
.score,.total{text-align:center;font-size:16px;margin-top:6px}
.flashcard{font-size:42px;text-align:center;padding:34px 10px;background:#fafafa;border-radius:14px;cursor:pointer;min-height:110px}
.btn{margin-top:8px;width:100%;padding:14px;border:none;border-radius:14px;background:#2196f3;color:white;font-size:17px;cursor:pointer}
.reset{background:#ff5722}
.notice{font-size:12px;text-align:center;color:#666;margin-top:4px}
@media (min-width:900px){
  .container{display:grid;grid-template-columns:1fr 1fr;gap:20px;max-width:1100px;margin:auto}
}
</style>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2196f3">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="×ª×¨×’×•×œ ×¢×¨×‘×™×ª">
<link rel="apple-touch-icon" href="icon-192.png">

</head>
<body>

<h1>ğŸ“ ×ª×¨×’×•×œ ×¢×¨×‘×™×ª</h1>

<div class="container">

<div class="box">
<h2>ğŸ§  ×¨×‘Ö¾×‘×¨×™×¨×”</h2>
<div id="quizInfo" style="text-align:center;font-weight:bold"></div>
<div id="quizWord" class="word"></div>
<button class="btn" onclick="playAudio()">ğŸ”Š ×”×©××¢</button>
<div class="notice">×‘××™×™×¤×•×Ÿ: ×•×“× ×©×œ× ×¢×œ ××¦×‘ ×©×§×˜ ğŸ”•</div>
<div id="answers" class="answers"></div>

<div class="score">× ×™×§×•×“ ×ª×¨×’×•×œ: <span id="score">0</span></div>
<div class="total">× ×™×§×•×“ ×›×•×œ×œ: <span id="totalScore">0</span></div>

<div class="progress"><div id="progressBar" class="progress-bar"></div></div>

<button id="reviewBtn" class="btn" style="display:none" onclick="enterReview()">ğŸ” ×”×¦×’ ×ª×©×•×‘×•×ª</button>
<button id="nextQuizBtn" class="btn" style="display:none" onclick="nextQuiz()">â¡ï¸ ×ª×¨×’×•×œ ×”×‘×</button>
<button class="btn reset" onclick="resetAll()">ğŸ” ××™×¤×•×¡ ××œ×</button>
</div>

<div class="box">
<h2>ğŸ“– ×›×¨×˜×™×¡×™×•×ª</h2>
<div id="flashcard" class="flashcard">×œ×—×¥ ×œ×”×ª×—×œ×”</div>
<button class="btn" onclick="nextFlash()">××™×œ×” ×”×‘××”</button>
<button class="btn" onclick="playAudioFlash()">ğŸ”Š ×”×©××¢</button>
</div>

</div>

<script>
// ===== FULL VOCABULARY (unchanged) =====
const words=[
{ar:"Ø²ÙØ§Ø±",he:"×‘×™×§×¨"},
{ar:"Ø£ÙØ±ÙØ§Ø¯Ù",he:"×¨×¦×”"},
{ar:"Ø¯ÙØ±ÙˆØ²",he:"×“×¨×•×–×™×"},
{ar:"ÙˆÙ",he:"×•"},
{ar:"Ø¯ÙØ§ÙˆÙØ¯",he:"×“××•×“"},
{ar:"ÙˆÙØ¯ÙØ§Ø¯",he:"×•×“××“"},
{ar:"Ø¯ÙØ§Ø±",he:"×“×™×¨×”"},
{ar:"ÙˆÙØ±Ø¯",he:"×•×¨×“"},
{ar:"Ø£ÙØ±Ù’Ø²",he:"××¨×–"},
{ar:"ÙˆÙØ²ÙÙŠØ±",he:"×©×¨"},
{ar:"Ø¯ÙØ±Ù’Ø²ÙÙŠÙ‘",he:"×“×¨×•×–×™"},
{ar:"ÙŠÙØ¯",he:"×™×“"},
{ar:"ÙŠÙØ§",he:"×™×"},
{ar:"ÙŠÙØ²ÙŠØ¯",he:"×™×–×™×“"},
{ar:"Ø²ÙÙŠØ¯",he:"×–×™×“"},
{ar:"ÙŠÙØ±ÙÙŠØ¯Ù",he:"×”×•× ×¨×•×¦×”"},
{ar:"Ø£ÙÙ…Ù‘",he:"×××"},
{ar:"Ù…ÙØ§Ù…ÙØ§",he:"×××"},
{ar:"Ø£ÙÙ…ÙÙ‘ÙŠ",he:"××× ×©×œ×™"},
{ar:"Ù…Ø§Ø°Ø§",he:"××”"},
{ar:"Ø£ÙÙ…ÙÙŠØ±",he:"×××™×¨"},
{ar:"Ù…ÙØ¯ÙÙŠØ±",he:"×× ×”×œ"},
{ar:"ÙŠÙÙˆÙ’Ù…",he:"×™×•×"},
{ar:"Ø£ÙÙ…ÙØ§Ù…Ù",he:"××•×œ"},
{ar:"Ø£ÙØ¨",he:"××‘×"},
{ar:"Ø¨ÙØ§Ø¨",he:"×“×œ×ª"},
{ar:"Ø£ÙØ¯ÙÙŠØ¨",he:"××“×™×‘"},
{ar:"Ø£ÙØ¨ÙÙˆ",he:"××‘× ×©×œ"},
{ar:"Ø£ÙÙˆÙ’",he:"××•"},
{ar:"Ø¨ÙØ¯ÙÙˆÙÙŠÙ‘",he:"×‘×“×•××™"},
{ar:"Ø£ÙØ¨ÙÙŠ",he:"××‘× ×©×œ×™"},
{ar:"Ø¨ÙØ¯ÙÙˆ",he:"×‘×“×•××™×"},
{ar:"Ø¨ÙØ§Ø¨ÙØ§",he:"××‘×"},
{ar:"Ù„ÙÙŠÙ’Ù„",he:"×œ×™×œ×”"},
{ar:"Ø¨ÙÙ„ÙØ¯",he:"×¢×™×¨"},
{ar:"Ù„ÙÙŠ",he:"×œ×™"},
{ar:"ÙˆÙÙ„ÙØ¯",he:"×™×œ×“"},
{ar:"Ø£ÙÙˆÙ’Ù„ÙØ§Ø¯",he:"×™×œ×“×™×"},
{ar:"Ø¨ÙÙŠÙ’Øª",he:"×‘×™×ª"},
{ar:"ØªÙÙ…Ù’Ø±",he:"×ª××¨"},
{ar:"ØªÙÙ„Ù’Ù…ÙÙŠØ°",he:"×ª×œ××™×“"},
{ar:"ØªÙÙ„ÙØ§Ù…ÙÙŠØ°",he:"×ª×œ××™×“×™×"},
{ar:"Ù…ÙÙ…Ù’ØªÙØ§Ø²",he:"××¦×•×™×Ÿ"},
{ar:"Ø£ÙÙŠÙ’Ù†Ù",he:"××™×¤×”"},
{ar:"Ù…ÙÙ†Ù’",he:"××™"},
{ar:"Ø¨ÙÙ†Ù’Øª",he:"×‘×ª"},
{ar:"Ø¨ÙÙ†ÙØ§Øª",he:"×‘× ×•×ª"},
{ar:"Ù„ÙØ¨Ù’Ù†ÙØ§Ù†",he:"×œ×‘× ×•×Ÿ"},
{ar:"Ù…ÙØ¯ÙÙŠÙ†ÙØ©",he:"×¢×™×¨"},
{ar:"Ø£ÙØ³Ù’Ø¨ÙÙˆØ¹Ù",he:"×©×‘×•×¢"},
{ar:"Ù…ÙØ¹Ù",he:"×¢×"},
{ar:"Ù…ÙØ¹ÙÙ„Ù‘ÙÙ…ÙØ©",he:"××•×¨×”"},
{ar:"Ø¹ÙØ§Ø¦ÙÙ„ÙØ©",he:"××©×¤×—×”"},
{ar:"Ø¹ÙÙ…Ù‘ÙØ§Ù†",he:"×¢×××Ÿ"},
{ar:"Ø¨ÙØ¹Ù’Ø¯Ù",he:"××—×¨×™"},
{ar:"Ø¹ÙØ±ÙØ¨ÙÙŠ",he:"×¢×¨×‘×™"},
{ar:"ÙŠÙØ¹Ù’Ù…ÙÙ„Ù",he:"×¢×•×‘×“"},
{ar:"Ø£Ø³Ù’Ù…",he:"×©×"},
{ar:"Ø£Ø³Ù’Ù…ÙÙŠ",he:"×©××™"},
{ar:"Ø³ÙÙˆØ±ÙÙŠÙØ§",he:"×¡×•×¨×™×”"},
{ar:"Ø¨ÙØ³Ù‘ÙØ§Ù…",he:"×‘×¡××"},
{ar:"Ø³ÙÙ…ÙÙŠØ±",he:"×¡××™×¨"},
{ar:"Ø£ÙÙ„Ù’Ø£ÙØ±Ù’Ø¯ÙÙ‘Ù†",he:"×™×¨×“×Ÿ"},
{ar:"Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©",he:"×‘×™×ª ×¡×¤×¨"},
{ar:"Ø¯ÙØ±Ù’Ø³",he:"×©×™×¢×•×¨"},
{ar:"Ø³ÙÙŠÙ‘ÙØ§Ø±ÙØ©",he:"××›×•× ×™×ª"},
{ar:"ÙƒÙØ±ÙÙŠÙ…",he:"×›×¨×™×"},
{ar:"Ù…ÙØ¨Ù’Ø±ÙÙˆÙƒ",he:"××–×œ ×˜×•×‘"},
{ar:"Ù…ÙÙƒÙ’ØªÙØ¨",he:"××©×¨×“"},
{ar:"ÙƒÙØªÙØ§Ø¨",he:"×¡×¤×¨"},
{ar:"ÙƒÙØ¨ÙÙŠØ±",he:"×’×“×•×œ"},
{ar:"Ø£Ø³ÙƒÙ†",he:"×× ×™ ×’×¨"},
{ar:"Ø¨ÙÙ†Ù’Ùƒ",he:"×‘× ×§"},
{ar:"Ù†ÙØ³ÙØ§ÙÙØ±Ù",he:"× ×™×¡×¢"},
{ar:"ÙŠÙÙˆØ³ÙÙ",he:"×™×•×¡×£"},
{ar:"ÙŠÙØ§ÙÙØ§",he:"×™×¤×•"},
{ar:"ÙÙØ±ÙÙŠØ¯",he:"×¤×¨×™×“"},
{ar:"ÙÙÙŠ",he:"×‘"},
{ar:"ÙˆÙÙÙØ§Ø¡",he:"×•×¤××”"},
{ar:"Ø¯ÙÙ…ÙØ´Ù’Ù‚",he:"×“××©×§"},
{ar:"Ù…ÙÙ‚ÙØ¯Ù‘ÙØ³",he:"××§×•×“×©"},
{ar:"Ø³ÙÙˆÙ‚",he:"×©×•×§"},
{ar:"Ù‚ÙØ¯ÙÙŠÙ…",he:"×¢×ª×™×§"},
{ar:"Ù‚ÙØ±ÙÙŠÙØ©",he:"×›×¤×¨"},
{ar:"Ø£ÙÙ„Ù’Ù‚ÙØ§Ù‡ÙØ±ÙØ©",he:"×§×”×™×¨"},
{ar:"Ù‚ÙØ§Ø±ÙØ©",he:"×™×‘×©×ª"},
{ar:"Ù…ÙØµÙ’Ø±",he:"××¦×¨×™×"},
{ar:"Ø¹ÙØ§ØµÙÙ…ÙØ©",he:"×¢×™×¨ ×‘×™×¨×”"},
{ar:"Ø¨ÙØµÙÙ„",he:"×‘×¦×œ"},
{ar:"ØµÙÙˆÙ’Ù…",he:"×¦×•×"},
{ar:"Ø¹ÙØµÙ’ÙÙÙˆØ±",he:"×¦×™×¤×•×¨"},
{ar:"Ù‡ÙØ°ÙØ§",he:"×–×”"},
{ar:"Ù‡ÙØ°ÙÙ‡Ù",he:"×–××ª"},
{ar:"Ù†ÙÙ‡Ù’Ø±",he:"× ×”×¨"},
{ar:"Ù‡ÙÙŠÙ",he:"×”×™×"},
{ar:"Ù‡ÙÙˆÙ",he:"×”×•×"},
{ar:"Ù‡ÙØ§Ù…Ù‘Ù",he:"×—×©×•×‘"}
];

const QUIZ_SIZE=10;
let quizzes=[];
function createQuizzes(){
  for(let i=0;i<10;i++){
    let shuffled=[...words].sort(()=>Math.random()-0.5);
    quizzes.push(shuffled.slice(0,QUIZ_SIZE));
  }
}
createQuizzes();

let quizIndex=0,current=0,score=0,totalScore=0,history=[];

// ===== BETTER iPHONE AUDIO =====
function playGoogleTTS(text){
  const url="https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=ar&q="+encodeURIComponent(text);
  const audio=new Audio(url);
  audio.play().catch(()=>{
    if('speechSynthesis' in window){
      const u=new SpeechSynthesisUtterance(text);
      u.lang="ar-SA";
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }
  });
}

function playAudio(){ playGoogleTTS(quizzes[quizIndex][current].ar); }
function playAudioFlash(){ playGoogleTTS(words[flashIndex].ar); }

function shuffle(arr){return arr.sort(()=>Math.random()-0.5);}

function showQuestion(){
  document.getElementById("quizInfo").innerText=`×ª×¨×’×•×œ ${quizIndex+1}/10 â€” ×©××œ×” ${current+1}/${QUIZ_SIZE}`;
  const q=quizzes[quizIndex][current];
  document.getElementById("quizWord").innerText=q.ar;

  let opts=[q.he];
  while(opts.length<4){
    let r=words[Math.floor(Math.random()*words.length)].he;
    if(!opts.includes(r)) opts.push(r);
  }
  opts=shuffle(opts);

  const div=document.getElementById("answers");
  div.innerHTML="";
  opts.forEach(opt=>{
    const btn=document.createElement("button");
    btn.innerText=opt;
    btn.onclick=()=>answer(btn,opt,q.he);
    div.appendChild(btn);
  });

  updateProgress();
}

function answer(btn,selected,correct){
  const buttons=[...document.querySelectorAll("#answers button")];
  buttons.forEach(b=>b.disabled=true);

  if(selected===correct){btn.classList.add("correct");score++;totalScore++;}
  else{btn.classList.add("wrong");}

  history.push({question:quizzes[quizIndex][current],selected,correct});
  document.getElementById("score").innerText=score;
  document.getElementById("totalScore").innerText=totalScore;

  setTimeout(()=>{
    current++;
    if(current>=QUIZ_SIZE){finishQuiz();}
    else{showQuestion();}
  },650);
}

// ğŸ”¥ FIXED PROGRESS BAR
function updateProgress(){
  const percent=Math.min(((current)/QUIZ_SIZE)*100,100);
  document.getElementById("progressBar").style.width=percent+"%";
}

function finishQuiz(){
  document.getElementById("progressBar").style.width="100%";
  document.getElementById("quizWord").innerText="ğŸ‰ ×¡×™×•× ×ª×¨×’×•×œ!";
  document.getElementById("answers").innerHTML="";
  document.getElementById("reviewBtn").style.display="block";
  document.getElementById("nextQuizBtn").style.display="block";
}

function enterReview(){
  let html="";
  history.forEach(h=>{
    let line=`<div style="margin:6px 0"><b>${h.question.ar}</b> â€” `;
    if(h.selected===h.correct)
      line+=`<span style="color:green">${h.correct}</span>`;
    else
      line+=`<span style="color:red">${h.selected}</span> â†’ <span style="color:green">${h.correct}</span>`;
    line+="</div>";
    html+=line;
  });
  document.getElementById("answers").innerHTML=html;
}

function nextQuiz(){
  quizIndex++;score=0;current=0;history=[];
  if(quizIndex>=quizzes.length){
    alert(`ğŸ† ×¡×™×™××ª ×”×›×œ!\n× ×™×§×•×“ ×›×•×œ×œ: ${totalScore}`);
    quizIndex=0;totalScore=0;
  }
  document.getElementById("score").innerText=score;
  document.getElementById("totalScore").innerText=totalScore;
  document.getElementById("reviewBtn").style.display="none";
  document.getElementById("nextQuizBtn").style.display="none";
  showQuestion();
}

function resetAll(){location.reload();}

let flashIndex=0,showingArabic=true;
function nextFlash(){
  showingArabic=true;
  flashIndex=(flashIndex+1)%words.length;
  document.getElementById("flashcard").innerText=words[flashIndex].ar;
}
document.getElementById("flashcard").onclick=function(){
  this.innerText=showingArabic?words[flashIndex].he:words[flashIndex].ar;
  showingArabic=!showingArabic;
};

nextFlash();
showQuestion();
</script>


<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
